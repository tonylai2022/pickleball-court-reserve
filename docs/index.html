<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="TRK达鲁酷运动餐酒吧 - 匹克球场在线预订系统">
	<meta name="keywords" content="匹克球,球场预订,TRK,运动,预约">
	<title>TRK 匹克球场预订</title>
	<link rel="stylesheet" href="css/style.css">
	<link rel="icon" href="images/favicon.svg" type="image/svg+xml">
	<meta name="format-detection" content="telephone=no">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta name="apple-mobile-web-app-title" content="TRK球场预订">
	<!-- Removed non-standard cache-control meta tags for HTML5 validity -->
	<style>/* tiny fix to ensure full-height */ html,body{height:100%;} </style>
	</head>
<body>
	<div id="loading" class="loading-overlay">
		<div class="loading-spinner">
			<div class="spinner"></div>
			<p>加载中...</p>
		</div>
	</div>

	<div id="app" class="app-container">
		<div id="home-page" class="page active">
			<header class="hero">
				<div class="hero-content">
					<h1 class="hero-title">TRK 匹克球俱乐部</h1>
					<p class="hero-subtitle">室内专属球场・风雨无阻・无懼烈日</p>
					<button class="hero-btn btn-primary" onclick="openBooking()">马上预约</button>
				</div>
			</header>

			<main class="home-content">
				<!-- Service Cards -->
				<section class="services">
					<div class="service-card card" onclick="showPage('events')">
						<div class="service-header">
							<h3 class="service-title">OPEN PLAY 开放时段</h3>
							<div class="service-price">¥350/人</div>
						</div>
						<p class="service-desc">需事先登记预约</p>
						<div class="service-schedule">
							<div>周一～周二：09:00-12:00</div>
							<div>周三～周五：18:30-21:30</div>
						</div>
						<button class="service-btn btn-secondary">马上登记 保留席次</button>
					</div>

					<div class="service-card card" onclick="openBooking()">
						<div class="service-header">
							<h3 class="service-title">场地租借</h3>
							<div class="service-pricing">
								<div class="pricing-row">
									<span>尖峰时段</span>
									<span class="price-value">¥150/时/场</span>
								</div>
								<div class="pricing-row">
									<span>非尖峰时段</span>
									<span class="price-value">¥120/时/场</span>
								</div>
							</div>
						</div>
						<p class="service-desc">一次租借两单位，享95折优惠！</p>
						<button class="service-btn btn-primary">马上预约</button>
					</div>

					<div class="service-card card">
						<div class="service-header">
							<h3 class="service-title">DUPR积分赛</h3>
							<div class="service-subtitle">分级进行</div>
						</div>
						<div class="service-schedule">
							<div>周一（3.0以下）：9:00-12:00</div>
							<div>周二（3.0以上）：9:00-12:00</div>
						</div>
						<button class="service-btn btn-secondary" onclick="showPage('events')">报名参加</button>
					</div>
				</section>

				<!-- Features -->
				<section class="features">
					<h2 class="section-title">我们的特色</h2>
					<div class="feature-grid">
						<div class="feature-item card">
							<h3 class="feature-title">室内专属球场</h3>
							<p class="feature-desc">风雨无阻・无懼烈日<br>匹克球专属球场地板画线不会眼花撩乱</p>
						</div>
						<div class="feature-item card">
							<h3 class="feature-title">多样化练球设备</h3>
							<p class="feature-desc">规划暖身练球区<br>多款专业球拍租借试打各类练球器材道具</p>
						</div>
						<div class="feature-item card">
							<h3 class="feature-title">用心规划</h3>
							<p class="feature-desc">轻松自在的复合空间<br>惊喜餐饮・菜单每日更换</p>
						</div>
						<div class="feature-item card">
							<h3 class="feature-title">推陈出新</h3>
							<p class="feature-desc">多样化课程新颖活动<br>旨在交谊聚乐</p>
						</div>
					</div>
				</section>

				<!-- Location Info -->
				<section class="location card">
					<h3 class="location-title">如何抵达？</h3>
					<div class="location-grid">
						<div class="location-item">
							<h4>地址</h4>
							<p>公平路209号友邦金融中心地下二层LG2层201号</p>
						</div>
						<div class="location-item">
							<h4>自行开车</h4>
							<p>汽车收费停车场 ¥5/时<br>机车停车场免费</p>
						</div>
						<div class="location-item">
							<h4>大众运输</h4>
							<p>公车可搭至金融中心站<br>地铁2号线金融中心站</p>
						</div>
					</div>
				</section>

				<div class="footer-links">
					<button class="footer-link" onclick="showPage('about')">关于我们</button>
					<button class="footer-link" onclick="showPage('terms')">服务条款</button>
					<button class="footer-link" onclick="showPage('privacy')">隐私政策</button>
				</div>
			</main>
		</div>

		<div id="booking-page" class="page">
			<header class="page-header">
				<button class="back-btn" onclick="goBack()">←</button>
				<h1 class="page-title">选择时间</h1>
				<div class="header-placeholder"></div>
			</header>

			<div class="booking-content">
				<div class="date-section card">
					<h3 class="section-title">选择日期</h3>
					<div class="date-picker">
						<div class="date-scroll" id="dateScroll"></div>
					</div>
				</div>

				<div class="time-section card">
					<div class="section-title-row">
						<h3 class="section-title">选择时间段</h3>
						<span class="section-hint">可多选连续时段</span>
					</div>
					<div class="time-grid" id="timeGrid"></div>
				</div>

				<div class="addons-section card">
					<h3 class="section-title">增值服务</h3>
					<div class="addons-grid">
						<div class="addon-item">
							<div class="addon-info">
								<div class="addon-title">球拍租赁</div>
								<div class="addon-desc">¥20/支</div>
							</div>
							<div class="qty-stepper">
								<button class="stepper-btn" onclick="changeAddonQty('paddles', -1)">-</button>
								<span class="stepper-value" id="qty-paddles">0</span>
								<button class="stepper-btn" onclick="changeAddonQty('paddles', 1)">+</button>
							</div>
						</div>
						<div class="addon-item">
							<div class="addon-info">
								<div class="addon-title">球（套装）</div>
								<div class="addon-desc">¥10/套</div>
							</div>
							<div class="qty-stepper">
								<button class="stepper-btn" onclick="changeAddonQty('balls', -1)">-</button>
								<span class="stepper-value" id="qty-balls">0</span>
								<button class="stepper-btn" onclick="changeAddonQty('balls', 1)">+</button>
							</div>
						</div>
					</div>
				</div>

				<div class="players-section card">
					<h3 class="section-title">参与人数</h3>
					<div class="players-row">
						<div class="qty-stepper">
							<button class="stepper-btn" onclick="changePlayers(-1)">-</button>
							<span class="stepper-value" id="playersCount">2</span>
							<button class="stepper-btn" onclick="changePlayers(1)">+</button>
						</div>
						<div class="per-person" id="perPerson">人均 ¥0</div>
					</div>
				</div>

				<div class="promo-section card">
					<h3 class="section-title">优惠/会员</h3>
					<div class="promo-row">
						<input id="promoInput" class="promo-input" placeholder="输入优惠码（如 PICKLE10）">
						<button class="btn-secondary" onclick="applyPromo()">应用</button>
					</div>
					<label class="toggle">
						<input type="checkbox" id="memberToggle" onchange="toggleMember(this.checked)">
						<span>会员折扣（9折）</span>
					</label>
				</div>

				<div class="booking-summary card">
					<h3 class="section-title">预订摘要</h3>
					<div class="summary-content">
						<div class="summary-item"><span class="summary-label">球场</span><span class="summary-value">Urban Dinker Court</span></div>
						<div class="summary-item"><span class="summary-label">日期</span><span class="summary-value" id="selectedDate">请选择日期</span></div>
						<div class="summary-item"><span class="summary-label">时间</span><span class="summary-value" id="selectedTime">请选择时间</span></div>
						<div class="divider"></div>
						<div class="fees" id="feeBreakdown">
							<!-- dynamic fee rows inserted here -->
						</div>
						<div class="summary-item total">
							<span class="summary-label">合计</span>
							<span class="summary-value price" id="totalPrice">¥0</span>
						</div>
					</div>
				</div>
			</div>

			<footer class="booking-footer">
				<button class="btn-primary" id="confirmBooking" onclick="goToPayment()" disabled>
					确认预订
				</button>
			</footer>
		</div>

		<div id="payment-page" class="page">
			<header class="page-header">
				<button class="back-btn" onclick="goBack()">←</button>
				<h1 class="page-title">确认支付</h1>
				<div class="header-placeholder"></div>
			</header>

			<div class="payment-content">
				<div class="order-summary card">
					<h3 class="section-title">订单摘要</h3>
					<div class="order-details" id="orderDetails"></div>
					<div class="fees" id="feeBreakdownPay"></div>
				</div>

				<div class="payment-section card">
					<h3 class="section-title">支付方式</h3>
					<div class="payment-options">
						<div class="payment-option selected" data-method="wechat">
							<div class="payment-icon wechat">💬</div>
							<div class="payment-info">
								<span class="payment-name">微信支付</span>
								<span class="payment-desc">安全便捷的支付方式</span>
							</div>
							<div class="payment-radio">
								<div class="radio checked"></div>
							</div>
						</div>
					</div>
				</div>

				<div class="payment-amount card">
					<div class="amount-row">
						<div class="terms">
							<label><input type="checkbox" id="agreeTerms" onchange="togglePayEnabled()"> 我已阅读并同意</label>
							<button class="link" onclick="showPage('terms')">服务条款</button> 和 <button class="link" onclick="showPage('privacy')">隐私政策</button>
						</div>
						<span class="amount-value" id="paymentAmount">¥0</span>
					</div>
				</div>
			</div>

			<footer class="payment-footer">
				<button class="btn-secondary" onclick="goBack()">返回修改</button>
				<button class="btn-primary" id="payNow" onclick="processPayment()">立即支付</button>
			</footer>
		</div>

		<!-- Events / Social Sessions -->
		<div id="events-page" class="page">
			<header class="page-header">
				<button class="back-btn" onclick="goBack()">←</button>
				<h1 class="page-title">活动时间表</h1>
				<div class="header-placeholder"></div>
			</header>
			<div class="events-content">
				<div id="dayStrip" class="day-strip"></div>
				
				<!-- Schedule Grid -->
				<div class="schedule-grid">
					<div class="schedule-header">
						<h3>OPEN PLAY 开放时段</h3>
						<div class="schedule-price">¥350/人</div>
					</div>
					<div class="schedule-times">
						<div class="time-slot available" onclick="bookOpenPlay('mon-tue', '09:00', '12:00')">
							<div class="time-range">周一～周二 09:00-12:00</div>
							<div class="spots-info">名额充足</div>
						</div>
						<div class="time-slot full" onclick="waitlistOpenPlay('wed-fri')">
							<div class="time-range">周三～周五 18:30-21:30</div>
							<div class="spots-info">已满 可候补</div>
						</div>
					</div>
				</div>

				<div class="schedule-grid">
					<div class="schedule-header">
						<h3>DUPR积分赛</h3>
						<div class="schedule-subtitle">分级进行</div>
					</div>
					<div class="schedule-times">
						<div class="time-slot available" onclick="bookDupr('mon', '3.0-')">
							<div class="time-range">周一（3.0以下）09:00-12:00</div>
							<div class="spots-info">6/16人</div>
						</div>
						<div class="time-slot limited" onclick="bookDupr('tue', '3.0+')">
							<div class="time-range">周二（3.0以上）09:00-12:00</div>
							<div class="spots-info">13/16人</div>
						</div>
					</div>
				</div>

				<div class="schedule-grid">
					<div class="schedule-header">
						<h3>场地租借</h3>
						<div class="schedule-pricing">
							<div>尖峰时段 ¥150/时</div>
							<div>非尖峰时段 ¥120/时</div>
						</div>
					</div>
					<div class="schedule-note">
						一次租借两单位，享95折优惠！
					</div>
					<button class="schedule-btn btn-primary" onclick="openBooking()">马上预约</button>
				</div>

				<!-- Legacy events list for filtered view -->
				<div class="card" style="display:none">
					<div class="filters-row">
						<select id="filterLevel" class="select" onchange="renderEvents()">
							<option value="">全部水平</option>
							<option value="beginner">新手</option>
							<option value="intermediate">进阶</option>
							<option value="advanced">高手</option>
						</select>

						<select id="filterDay" class="select" onchange="renderEvents()">
							<option value="">全部日期</option>
							<option value="weekday">工作日</option>
							<option value="weekend">周末</option>
						</select>
					</div>
					<div id="eventsList" class="events-list"></div>
				</div>
			</div>
		</div>

		<!-- Membership / Pricing -->
		<div id="membership-page" class="page">
			<header class="page-header">
				<button class="back-btn" onclick="goBack()">←</button>
				<h1 class="page-title">会员与价格</h1>
				<div class="header-placeholder"></div>
			</header>
			<div class="membership-content">
				<div class="plans">
					<div class="plan card">
						<h3 class="plan-name">基础会员</h3>
						<p class="plan-price">¥0/月</p>
						<ul class="plan-features">
							<li>在线预订</li>
							<li>活动报名</li>
						</ul>
						<button class="btn-secondary" onclick="showToast('已选择基础会员')">选择</button>
					</div>
					<div class="plan card popular">
						<div class="badge">推荐</div>
						<h3 class="plan-name">PRO 会员</h3>
						<p class="plan-price">¥39/月</p>
						<ul class="plan-features">
							<li>会员专享9折</li>
							<li>优先报名前排</li>
							<li>活动提醒与优先候补</li>
						</ul>
						<button class="btn-primary" onclick="enableDemoMembership()">开通（演示）</button>
					</div>
				</div>
				<div class="note">演示环境不会真实扣款，点击“开通（演示）”将直接启用会员折扣。</div>
			</div>
		</div>

		<!-- FAQ -->
		<div id="faq-page" class="page">
			<header class="page-header">
				<button class="back-btn" onclick="goBack()">←</button>
				<h1 class="page-title">常见问题</h1>
				<div class="header-placeholder"></div>
			</header>
			<div class="faq-content">
				<div class="faq-item card">
					<button class="faq-q" onclick="toggleFaq(this)">如何预订球场？</button>
					<div class="faq-a">在首页或活动页选择时间段与日期，确认费用后前往支付即可完成预订。</div>
				</div>
				<div class="faq-item card">
					<button class="faq-q" onclick="toggleFaq(this)">可以多人拼场吗？</button>
					<div class="faq-a">可以，在“参与人数”中设置人数后可查看人均费用，邀请好友一起参加。</div>
				</div>
				<div class="faq-item card">
					<button class="faq-q" onclick="toggleFaq(this)">是否支持退款？</button>
					<div class="faq-a">请至少在开始前24小时申请取消，将视具体情况予以处理（演示站仅为模拟）。</div>
				</div>
			</div>
		</div>

		<div id="success-page" class="page">
			<div class="success-content">
				<div class="success-header">
					<div class="success-icon"><div class="check-mark">✓</div></div>
					<h1 class="success-title">预订成功！</h1>
					<p class="success-subtitle">您的匹克球场已预订成功，期待您的到来！</p>
					<div class="celebration">🎉</div>
				</div>

				<div class="voucher-card card">
					<div class="voucher-header">
						<h3 class="voucher-title">预订凭证</h3>
						<div class="qr-code"><div class="qr-placeholder"><span class="qr-text">二维码</span><span class="qr-subtitle">到场出示</span></div></div>
					</div>
					<div class="voucher-content">
						<div class="booking-number">
							<span class="number-label">预订编号</span>
							<span class="number-value" id="confirmationNumber"></span>
							<button class="copy-btn" onclick="copyBookingNumber()">复制</button>
						</div>
					</div>
				</div>

				<div class="booking-details card">
					<div class="details-header">
						<h3 class="details-title">预订详情</h3>
						<div class="status-badge success"><span class="status-text">已确认</span></div>
					</div>
					<div class="details-content" id="bookingDetails"></div>
					<div class="per-person-large" id="perPersonSuccess">人均 ¥0</div>
				</div>

				<div class="action-buttons">
					<button class="action-btn" onclick="shareBooking()"><span class="btn-icon">📤</span><span class="btn-text">分享预订</span></button>
					<button class="action-btn" onclick="addToCalendar()"><span class="btn-icon">📅</span><span class="btn-text">加入日历</span></button>
					<button class="action-btn" onclick="contactSupport()"><span class="btn-icon">📞</span><span class="btn-text">联系客服</span></button>
				</div>
			</div>
			<footer class="success-footer"><button class="btn-primary" onclick="goHome()">返回首页</button></footer>
		</div>

		<div id="about-page" class="page">
			<header class="page-header"><button class="back-btn" onclick="goBack()">←</button><h1 class="page-title">关于我们</h1><div class="header-placeholder"></div></header>
			<div class="about-content">
				<div class="about-card card">
					<div class="app-info"><img src="images/court.svg" alt="TRK Logo" class="app-logo"><h2 class="app-name">TRK 匹克球场预订</h2><p class="version">版本 1.0.0</p></div>
					<div class="venue-info"><h3>TRK·达鲁酷运动餐酒吧</h3><p class="venue-address">友邦金融中心店</p><p class="venue-desc">专业匹克球场，设施完善，环境优雅</p></div>
				</div>
			</div>
		</div>

		<div id="terms-page" class="page">
			<header class="page-header"><button class="back-btn" onclick="goBack()">←</button><h1 class="page-title">服务条款</h1><div class="header-placeholder"></div></header>
			<div class="terms-content"><div class="terms-card card"><p class="last-updated">最后更新：2025年9月18日</p><div class="terms-text"><h3>1. 服务说明</h3><p>TRK匹克球场预订系统为用户提供在线球场预订服务...</p></div></div></div>
		</div>

		<div id="privacy-page" class="page">
			<header class="page-header"><button class="back-btn" onclick="goBack()">←</button><h1 class="page-title">隐私政策</h1><div class="header-placeholder"></div></header>
			<div class="privacy-content"><div class="privacy-card card"><p class="last-updated">最后更新：2025年9月18日</p><div class="privacy-text"><h3>1. 信息收集</h3><p>本系统仅收集您进行球场预订所必需的信息...</p></div></div></div>
		</div>
	</div>

	<div id="modal-overlay" class="modal-overlay">
		<div class="modal-content">
			<div class="modal-header"><h3 id="modal-title">提示</h3><button class="modal-close" onclick="closeModal()">×</button></div>
			<div class="modal-body"><p id="modal-message">消息内容</p></div>
			<div class="modal-footer"><button class="btn-secondary" id="modal-cancel" onclick="closeModal()">取消</button><button class="btn-primary" id="modal-confirm" onclick="closeModal()">确定</button></div>
		</div>
	</div>

	<div id="toast" class="toast"><span id="toast-message">消息</span></div>

	<!-- Bottom Tab Bar -->
	<nav id="tabbar" class="tabbar">
		<button class="tab-btn" onclick="showPage('home')">首页</button>
		<button class="tab-btn" onclick="showPage('events')">活动</button>
		<button class="tab-btn" onclick="showPage('membership')">会员</button>
		<button class="tab-btn" onclick="showPage('faq')">FAQ</button>
	</nav>

	<script src="js/app.js"></script>
	</body>
	</html>
