<!--payment.wxml-->
<view class="container">
  <!-- 订单摘要 -->
  <view class="order-summary card">
    <view class="summary-header">
      <text class="page-title">确认订单</text>
    </view>
    <view class="order-details">
      <view class="detail-item">
        <text class="detail-label">球场名称:</text>
        <text class="detail-value">{{bookingInfo.court.name}}</text>
      </view>
      <view class="detail-item">
        <text class="detail-label">预订日期:</text>
        <text class="detail-value">{{bookingInfo.dateLabel}}</text>
      </view>
      <view class="detail-item">
        <text class="detail-label">预订时间:</text>
        <text class="detail-value">{{bookingInfo.time}}</text>
      </view>
      <view class="detail-item total">
        <text class="detail-label">订单金额:</text>
        <text class="detail-value price">¥{{bookingInfo.price}}</text>
      </view>
    </view>
  </view>

  <!-- 支付方式选择 -->
  <view class="payment-section card">
    <view class="section-header">
      <text class="section-title">选择支付方式</text>
    </view>
    
    <view class="payment-options">
      <!-- 微信支付 -->
      <view 
        class="payment-option selected"
        bindtap="selectPayment"
        data-method="wechat"
      >
        <view class="payment-icon wechat">
          <image src="/images/wechat-pay.png" class="payment-logo" mode="aspectFit" />
        </view>
        <view class="payment-info">
          <text class="payment-name">微信支付</text>
          <text class="payment-desc">安全便捷的支付方式</text>
        </view>
        <view class="payment-radio">
          <view class="radio checked"></view>
        </view>
      </view>
    </view>
  </view>

  <!-- 支付金额确认 -->
  <view class="payment-amount card">
    <view class="amount-row">
      <text class="amount-label">实付金额</text>
      <text class="amount-value">¥{{bookingInfo.price}}</text>
    </view>
  </view>

  <!-- 底部按钮 -->
  <view class="footer">
    <button class="btn-secondary" bindtap="goBack">返回修改</button>
    <button 
      class="btn-primary {{isProcessing ? 'disabled' : ''}}" 
      bindtap="processPayment"
      disabled="{{isProcessing}}"
      loading="{{isProcessing}}"
    >
      {{isProcessing ? '处理中...' : '立即支付'}}
    </button>
  </view>
</view>

<!-- 支付处理弹窗 -->
<view class="payment-modal {{showPaymentModal ? 'show' : ''}}" wx:if="{{showPaymentModal}}">
  <view class="modal-content">
    <view class="modal-icon">
      <image src="/images/payment-processing.gif" class="processing-icon" mode="aspectFit" />
    </view>
    <text class="modal-title">正在处理支付...</text>
    <text class="modal-desc">请稍候，正在为您完成预订</text>
  </view>
</view>
